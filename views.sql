drop view if exists allFlights;
create view allFlights as select (select nameofairport from airport where airportcode = route.departureairport)  as departure_city_name, (select nameofairport from airport where airportcode = route.arrivalairport) as destination_city_name , flight.weeknumber as departure_week, weeklyschedule.year as departure_year, weeklyschedule.timeofdeparture as departure_time, weeklyschedule.weekday as departure_day, calculateFreeSeats(flight.flightnumber) as nr_of_free_seats,ROUND(calculatePrice(flight.flightnumber),3) as current_price_per_seat from flight  join  weeklyschedule  on flight.scheduleid = weeklyschedule.id join route on route.idroute = weeklyschedule.route;
